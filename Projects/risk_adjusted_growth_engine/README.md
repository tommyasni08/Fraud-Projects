# RAGE — Risk-Adjusted Growth Engine

**One-liner**: Personalization that grows net revenue _safely_ using uplift modeling + constrained policy selection, validated via sequential A/B testing with guardrail metrics and an exec dashboard.

## What’s in this repo (Step 1)

- Synthetic, time-indexed fintech dataset (users × weeks).
- Reproducible generator with fixed seed.
- Configs for KPIs, guardrails, and cohort sizes.
- Clear next steps to train uplift & risk models, run policy optimization, and simulate A/B/n experiments.

## Folder layout

```
rage/
├─ data/
│  ├─ raw/                 # synthetic csvs generated by simulate step
│  └─ processed/           # feature tables (to be created in Step 2)
├─ notebooks/              # EDA, uplift, risk, policy (added later)
├─ src/
│  ├─ simulate/            # data generator (this step)
│  ├─ features/            # feature engineering (next step)
│  ├─ models/              # uplift & risk models
│  ├─ policy/              # constrained bandit / offline policy learning
│  ├─ abtest/              # sequential A/B/n + CUPED utilities
│  └─ metrics/             # AUUC, uplift@k, nRPAU, guardrails
├─ dashboards/streamlit_app/  # Control Tower (later)
├─ model_card/             # model & data cards (later)
├─ configs/                # YAML configs (KPI, guardrails, sim settings)
└─ tests/                  # unit tests (later)
```

## Quickstart

```bash
# 1) Generate synthetic data (csvs) into rage/data/raw/
python rage/src/simulate/generate_data.py --output rage/data/raw --users 10000 --weeks 12 --seed 42

# 2) Inspect a sample (optional)
python - <<'PY'
import pandas as pd
print(pd.read_csv("rage/data/raw/users.csv", nrows=5).to_string(index=False))
print(pd.read_csv("rage/data/raw/behavior_weekly.csv", nrows=5).to_string(index=False))
PY
```

## KPIs & Guardrails (from configs/metrics.yaml)

- **Primary KPI**: `nRPAU` (net Revenue per Active User) = `revenue_gross - loss_fraud - loss_bonus_abuse - bonus_cost`
- **Guardrails**: loss rate ≤ 0.25% GMV, chargeback rate ≤ network threshold, bonus-abuse incidence ≤ baseline.

## Next steps

- **Step 2 (Features & EDA)**: Build feature tables, retention curves, risk indicators.
- **Step 3 (Modeling)**: Uplift (DR-learner) and Fraud (XGBoost + IsolationForest).
- **Step 4 (Policy)**: Constrained contextual bandit / offline policy with IPS/DR.
- **Step 5 (Experiment)**: A/B/n with CUPED and Bayesian monitoring.
- **Step 6 (Dashboard)**: Exec Control Tower (Streamlit).
